import sys
from pathlib import Path
from colorama import init, Fore, Style

def print_tree(directory: Path, prefix: str = '') -> None:
    """
    –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.
    –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –≤–∏–≤–æ–¥—è—Ç—å—Å—è —Å–∏–Ω—ñ–º, —Ñ–∞–π–ª–∏ ‚Äì –∑–µ–ª–µ–Ω–∏–º.
    """
    # –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, —Å–ø–æ—á–∞—Ç–∫—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –ø–æ—Ç—ñ–º —Ñ–∞–π–ª–∏ (–∑–∞ –∞–ª—Ñ–∞–≤—ñ—Ç–æ–º)
    items = sorted(directory.iterdir(), key=lambda x: (not x.is_dir(), x.name.lower()))
    count = len(items)
    for i, item in enumerate(items):
        # –í–∏–±—ñ—Ä —Å–∏–º–≤–æ–ª—É –¥–ª—è –≤–∏–≤–æ–¥—É: "‚î£" –¥–ª—è –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, "‚îó" –¥–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ
        connector = "‚î£ " if i < count - 1 else "‚îó "
        if item.is_dir():
            # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å–∏–Ω—ñ–º –∫–æ–ª—å–æ—Ä–æ–º
            print(prefix + connector + Fore.BLUE + item.name + Style.RESET_ALL)
            # –ó–º—ñ–Ω—é—î–º–æ –ø—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ
            new_prefix = prefix + ("‚îÉ " if i < count - 1 else "  ")
            # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–≤–æ–¥–∏–º–æ –≤–º—ñ—Å—Ç –≤–∫–ª–∞–¥–µ–Ω–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
            print_tree(item, new_prefix)
        else:
            # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É –∑–µ–ª–µ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º
            print(prefix + connector + Fore.GREEN + item.name + Style.RESET_ALL)

def main() -> None:
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è colorama
    init()

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—É –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    if len(sys.argv) != 2:
        print("–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: python task3.py /Users/halynalekhnovska/Documents/Study/Pyton/goit-pycore-hw-04")
        sys.exit(1)

    # –û—Ç—Ä–∏–º—É—î–º–æ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    dir_path = Path(sys.argv[1])

    # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∏ —à–ª—è—Ö —ñ—Å–Ω—É—î —Ç–∞ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
    if not dir_path.exists():
        print("–ü–æ–º–∏–ª–∫–∞: –í–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö –Ω–µ —ñ—Å–Ω—É—î.")
        sys.exit(1)
    if not dir_path.is_dir():
        print("–ü–æ–º–∏–ª–∫–∞: –í–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é.")
        sys.exit(1)

    # –í–∏–≤–æ–¥–∏–º–æ –Ω–∞–∑–≤—É –≥–æ–ª–æ–≤–Ω–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑ –ø—ñ–∫—Ç–æ–≥—Ä–∞–º–æ—é "üì¶"
    print(Fore.BLUE + f"üì¶{dir_path.name}" + Style.RESET_ALL)
    # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤–∏–≤–æ–¥–∏–º–æ –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
    print_tree(dir_path)

if __name__ == "__main__":
    main()
